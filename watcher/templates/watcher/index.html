{% extends "watcher/base.html" %}

{% load i18n admin_urls static admin_list %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/changelists.css' %}"/>
{% if cl.formset %}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/forms.css' %}"/>
{% endif %}
{% if cl.formset or action_form %}
<script type="text/javascript" src="{% url 'admin:jsi18n' %}"></script>
{% endif %}
{{ media.css }}
{% if not actions_on_top and not actions_on_bottom %}
<style>
      #changelist table thead th:first-child {width: inherit}

</style>
{% endif %}
{% endblock %}

{% block extrahead %}
{{ block.super }}
{{ media.js }}
{% endblock %}

{% block userlinks %}
{% if user.is_staff %} <a href="{% url 'admin:index' %}">{% trans "Manage" %}</a> / {% endif %}
<a href="{% url 'account:logout' %}">{% trans "Log out" %}</a>
{% endblock %}

{% load staticfiles %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/modify_watcher.css' %}">
<h1>Service list</h1>
<div id="content-main">
    <div class="module" id="changelist">
        <div id="toolbar">
            <form id="changelist-search" method="get">
                <div><!-- DIV needed for valid HTML -->
                    <label for="searchbar"><img src="{% static 'admin/img/search.svg' %}" alt="Search"/></label>
                    <input type="text" style="width:auto" name="q" value="{{ search }}" id="searchbar" autofocus/>
                    <input type="submit" value="{% trans 'Search' %}"/>
                </div>
            </form>
        </div>

        <form id="changelist-form" method="post" novalidate>{% csrf_token %}
            <div class="results">
                <table id="result_list" style="margin:auto; width:100%; height:100%;">
                    <thead>
                    <tr>
                        <th scope="col" class="sortable column-name">
                            <div class="text">{% trans "Name" %}</div>
                            <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-description">
                            <div class="text">{% trans "Description" %}</div>
                            <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-status">
                            <div class="text">{% trans "Status" %}</div>
                            <div class="clear"></div>
                        </th>
                        {% if user.is_staff %}
                        <th scope="col" class="sortable column-start">
                            <div class="text">{% trans "start / restart" %}</div>
                            <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-stop">
                            <div class="text">{% trans "Stop" %}</div>
                            <div class="clear"></div>
                        </th>
                        {% endif %}
                    </tr>
                    </thead>
                    <tbody>
                    {% for service in services %}
                    <tr class="row{{ forloop.counter }}">
                        <th class="field-name" valign="center">{{ service.name }}</th>
                        <td class="field-description nowrap" valign="center">{{ service.description }}</td>
                        <td class="field-status" valign="center">{{ service.status }}</td>
                        {% if user.is_staff %}
                        <td class="field-start" valign="center">
                            <a href="" id="start">{{ service.start }}</a>
                        </td>
                        <td class="field-stop" valign="center">
                            <a href="" id="stop">{{ service.stop }}</a>
                        </td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <p class="paginator">{% trans "Count of services" %}: {{ services.count }}</p>
        </form>
    </div>
</div>
<br class="clear"/>
{% endblock %}
